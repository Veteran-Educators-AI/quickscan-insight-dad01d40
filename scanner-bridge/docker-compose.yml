# Scanner Bridge Docker Compose
# Run with: docker-compose up -d

version: '3.8'

services:
  scanner-bridge:
    build: .
    container_name: scanner-bridge
    restart: unless-stopped
    ports:
      - "8765:8765"
    # Required for USB scanner access
    privileged: true
    volumes:
      # Mount USB devices for scanner access
      - /dev/bus/usb:/dev/bus/usb
      # SANE configuration (optional, for custom scanner configs)
      - ./sane.d:/etc/sane.d:ro
      # Output directory for scanned images (optional)
      - ./scans:/app/scans
    environment:
      - NODE_ENV=production
      - WS_PORT=8765
      - ALLOWED_ORIGINS=http://localhost:*,https://*.lovable.app,https://*.lovable.dev
